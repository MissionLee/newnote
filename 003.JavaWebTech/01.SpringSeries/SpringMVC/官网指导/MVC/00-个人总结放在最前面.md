# Spring MVC

- Dispatcher / DispatcherServlet
  - tomcat把请求交给 Spring的 DispatcherServlet (可以指定一个url，也可以直接配置成 / 这样就作为默认Servlet了)
  - DispatcherServlet 自己维护一个 url mapping
    - 可以理解为： ServletPath 与 Controller中的 RequestMapping内容匹配
  - 配置 DispatcherServlet的方法有两个
    - 在 web.xml里面配置
      - 对应一个DispatcherServlet 也要配置自己的dispatcher-servlet.xml文件
    - 用Java配置
      - 实现 WebApplicationInitializer接口
      - tomcat根据 java标准，会用SPI机制调用这个WebApplicationInitializer实现对 DispatcherServlet的配置

- Context Hierarchy 上下文层级
  - 扩展的说一下，Web容器是真正的全局上下文环境=> ServletContaienr
  - Spring的 ContextLoaderListener 实现了ServletContextListener
    - ServletContextListener 接口作用就是当其所在的 servlet context发生变化的时候，会通知这个接口（chu'fa'shi'jian）
    - 直接说一下其中实现的一个方法 contextInitialized
      - 收县判断当前被初始化的ServletContext是否有`WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE` 这个 attribute
        - 如果已经有了，说明可能配置了多个 ContextLoader* (在web.xml里面)
      - 如果没有，继续后续操作
      - 首先判断自己的context （this.context 自己就是 root WebApplicationContext） 是否存在  
        - 不存在就初始化自己
          - 从当前触发时间的 ServletContext 获取其
        - 